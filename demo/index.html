<!DOCTYPE html>
<html>

  <head lang="en">
    <meta charset="utf-8">
    <title>Custom Plunker</title>
    <style>
      body {
        background: #BADA55;
      }
    </style>
  </head>

  <body>
    <script src="domvas.js"></script>
    <iframe id="dom" src="inner.html"></iframe>
    <canvas id="test"></canvas>
    <script>
      // Set up the canvas dimensions
      var $canvas = document.getElementById('test');
      $canvas.width = 500;
      $canvas.height = 600;

      // Grab the canvas
      var $dom = document.getElementById('dom');
      $dom.onload = function () {
        var canvas = document.getElementById("test");
        var context = canvas.getContext('2d');

        var $domBody = $dom.contentWindow.document.body;

        // TODO: Cross-browser this (even though domvas uses exactly this)
        // TODO: Allow for specification of iframe dimension, body dimensions, or custom
        var domStyle = getComputedStyle($dom),
            domHeight = parseInt(domStyle.height, '10'),
            domWidth = parseInt(domStyle.width, '10');

        domvas.toImage($domBody, function () {
          var img = this;
          context.drawImage(img, 0, 0);
          // context.drawImage(img, 0, 0, 250, 300);
        }, domWidth, domHeight);
      };
    </script>

    <script src="https://raw.github.com/twolfson/File-Watcher/master/src/watcher.js"></script>
    <script src="https://raw.github.com/twolfson/Resource-Collector/master/src/collector.js"></script>
    <script>
        (function () {
           var watcher = new FileWatcher(),
               resources = ResourceCollector.collect();
           watcher.addListener(function () {
             location.reload();
           });
           watcher.watch(resources);
        }());
    </script>
  </body>

</html>